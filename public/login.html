<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Authoro - Online Book Creator - Login / Create an Account</title>
  
  <link rel="stylesheet" href="stylesheets/css/login.css">
  
  <link href='https://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,700' rel='stylesheet' type='text/css'>
  
  <link rel="icon" type="image/png" href="assets/images/favicon.png">
  
  <link rel="stylesheet" href="assets/icons/style.css">
  <!--[if lt IE 8]><!-->
  <link rel="stylesheet" href="ie7/ie7.css">
  <!--<![endif]-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
  
  <script src="https://www.gstatic.com/firebasejs/live/3.0/firebase.js"></script>
  <script>
    // Initialize Firebase
    var config = {
      apiKey: "AIzaSyDrT6bH6Bh3aBBAIUlKNzfjFeaSt7geyDU",
      authDomain: "web-book-creator-2bfda.firebaseapp.com",
      databaseURL: "https://web-book-creator-2bfda.firebaseio.com",
      storageBucket: "web-book-creator-2bfda.appspot.com",
    };
    firebase.initializeApp(config);
  </script>
  
  <script type="text/javascript">
    var user = firebase.auth().currentUser;
    if (user) {
      alert('already Logged in');
    }
    /*if (!firebase.auth().currentUser) {
      alert('already Logged in');
      console.log(firebase.auth().currentUser);
      //window.location.href = "dashboard.html";
    }*/
    
    $(document).ready(function(){
      $(".google-login .btn").click(function() {
        toggleSignIn();
      });
    });
    function toggleSignIn() {
      var provider = new firebase.auth.GoogleAuthProvider();
      provider.addScope('https://www.googleapis.com/auth/plus.login');
      
      firebase.auth().signInWithPopup(provider).then(function(results){
        // This gives you a Google Access Token. You can use it to access the Google API.
        var token = results.credential.accessToken;
        // The signed-in user info.
        var user = results.user;
        console.log(user);
        
        window.location.href = "dashboard.html";
      });
      /*if (firebase.auth().currentUser) {
        var provider = new firebase.auth.GoogleAuthProvider();
        provider.addScope('https://www.googleapis.com/auth/plus.login');
        
        firebase.auth().signInWithPopup(provider).then(function(result) {
          // This gives you a Google Access Token. You can use it to access the Google API.
          var token = result.credential.accessToken;
          // The signed-in user info.
          var user = result.user;
        }).catch(function(error) {
          // Handle Errors here.
          var errorCode = error.code;
          var errorMessage = error.message;
          // The email of the user's account used.
          var email = error.email;
          // The firebase.auth.AuthCredential type that was used.
          var credential = error.credential;
          
          if (errorCode === 'auth/account-exists-with-different-credential') {
            alert('You have already signed up with a different auth provider for that email.');
          } else {
            console.error(error);
          }
        });
      }*/
    }
  </script>
</head>
<body>
  <section class="container">
    <div class="img-section">
      <div class="content">
        <div class="logo-container"><p>authoro</p></div>
        <h1>What story will you create today?</h1>
      </div>
    </div>
    <div class="login-section">
      <h1>Sign in</h1>
      <div class="form-container">
        <div class="google-login">
          <div class="btn">
            <i class="icon-Dashboard-Icon"></i><p>Log in with <span>Google</span></p>
          </div>
          <p class="note">Other methods of loging in will be added at a later date.</p>
        </div>
      </div>
    </div>
  </section>
</body>
</html>